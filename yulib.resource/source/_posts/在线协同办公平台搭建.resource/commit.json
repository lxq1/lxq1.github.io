{"compress":true,"commitItems":[["07b4638b-7594-4b57-9056-be18c8e24bad",1532324040578,"---\nlayout: post\ntitle: Lorem ipsum\ncategories: \n  - consectetur\n  - malesuada\ntags:\n  - semper\n  - fermentum\n---\n\n![Nulla euismod, vitae aliquet orci eleifend.]($appres/images/night.jpg)\n\n# Lorem ipsum\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eu tempor dolor. Nulla hendrerit convallis purus et elementum. Suspendisse non magna vel justo tincidunt finibus. Nullam dui erat, malesuada eget viverra non, finibus a nisl.",[[1532323982981,["lixq@lixq-PC",[[-1,115,"![Nulla euismod, vitae aliqu"],[1,143,"# office\n\n\n## collabora office\n\n\n### 1. 拉取镜像\n\n```\n\ndocker pull collabora/code\n\n```\n### 2. 启动镜像\n容器运行命令\n\n```\ndocker run -t -d -p 0.0.0.0:9980:9980 -e 'domain=pan\\\\.haoguangfu\\\\.cn' -e \"username=admin\" -e \"password=123456\" --restart always --cap-add MKNOD collabora/code\n\n\n```\n\n测试是否成功安装命令\n\n```\n\nhttps://webhttps.haoguangfu.cn/loleafl"],[1,145,"/dist/admin/admin.html\n\n```\n\nNginx配置文件\n\n```\n\n\n##"],[1,146,"collab"],[1,148,"a offi"],[1,149,"e\n\n\tserver {\n    l"],[1,150,"sten"],[1,151,"      443 ssl;\n    s"],[1,152,"rver_name  webhttps.haoguangfu.cn;\n\n    ss"],[1,153,"_c"],[1,154,"rt"],[1,156,"icat"],[1,157," /cloud/nginx/ssl/1_webhttps.haoguangfu.cn_bu"],[-1,159,".]($appres/images/night.jpg)\n\n# Lorem ipsum\n\nLorem ipsum dolo"],[1,220,"le.crt;\n    ssl_certificate_key /cloud/nginx/ssl/2_webhttps.haoguangfu.cn.key;\n\n    # static files\n    location ^~ /loleaflet {\n        proxy_pass https://localhost:9980;\n        proxy_set_header Host $http_host;\n    }\n\n    # WOPI discovery URL\n    location ^~ /hosting/discovery {\n        proxy_pass https://localhost:9980;\n        proxy_set_header Host $http_host;\n    }\n\n    # main websocket\n    location ~ ^/lool/(.*)/ws$ {\n        proxy_pass https://localhost:9980;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"Upgrade\";\n        proxy_set_header Host $http_host;\n        proxy_read_timeout 36000s;\n    }\n\n    # download, presentation and image upload\n    location ~ ^/lool {\n        proxy_pass https://localhost:9980;\n        proxy_set_heade"],[1,222,"Ho"],[-1,223,"i"],[-1,226,"amet, c"],[1,233,"$http_host;\n    }\n\n    # Admin Console websocket\n    locati"],[1,235," ^~ /lool/adminws {\n        proxy_pass https://localhost:9980;\n        proxy_"],[-1,237,"c"],[1,239,"_h"],[1,240,"ader Upgrade $ht"],[1,241,"p_"],[1,242,"pg"],[-1,243," "],[-1,246,"ipiscing elit. Phasellus eu tempor dolor. Nulla hendr"],[1,299,"e;\n        proxy_set_header Connection \"Upgrade\";\n        proxy_set_header Host $http_host;\n        proxy_read_timeout 36000s;\n    }\n\t}\n```\n重启docker 服务\n\n```\n\nsystemctl daemon-reload\n\n启动Nginx\n\n```\n\n-----\n\n## onlyoffice\n\n### 1. 拉取镜像\n```\n\ndocker pull onlyoffice/documentserv"],[1,301,"\n\n```\n\n###  2. 前期准备\n```\n\nmkd"],[1,302,"r -p /cloud/onlyoffice/Documen"],[1,303,"Server/logs\nmkdir"],[1,304,"-p /"],[1,305,"loud/"],[1,307,"lyoffice/DocumentSer"],[1,308,"er/d"],[1,309,"ta\nmkdir -p /c"],[1,310,"oud/on"],[1,311,"yoff"],[1,312,"ce/DocumentServer/data/cert"],[-1,314,"purus et ele"],[1,326,"#复制证书文件到此文件夹，证书改名onlyoffice\n\n\n```\n### 3. 启动容器\n\n\n```\n\ndocker run -i -t -d -p 9443:443 -v /cloud/onlyoffice/Docu"],[1,330,"Server/logs:/var/log/onlyoffice -v /cloud/onlyoffice/Doc"],[-1,332,". Suspendisse non magna vel justo tincidunt finibus. Nullam dui erat, malesuada eget viverra non, finibus a nisl."],[1,445,"entServer/data:/var/www/onlyoffice/Data --name onlyoffice onlyoffice/documentserver\n\n\n```\n\n### 4. docker配置文件 \n```\n\n## office\n\t\n\t  server {\n        listen       443 ssl;\n        server_name  webhttps.haoguangfu.cn;\n\n        ssl on;\n\t\tssl_certificate /cloud/nginx/ssl/1_webhttps.haoguangfu.cn_bundle.crt;\n\t\tssl_certificate_key /cloud/nginx/ssl/2_webhttps.haoguangfu.cn.key;\n\t\tssl_session_timeout 1d;\n\t\tssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; \n\t\tssl_protocols TLSv1 TLSv1.1 TLSv1.2;\t\t\n\t\tssl_prefer_server_ciphers on;\n\n        location / {\n           proxy_redirect off;\n\t\t\tproxy_pass https://localhost:9443;\n\t\t\tproxy_set_header Host $http_host;\n\t\t\tproxy_set_header X-Real-IP $remote_addr;\n\t\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\t\t\t \n\n        }\n    }\n```\n### 4. 重启docker服务\n\n```\nsystemctl daemon-reload\n\n重启Nginx\n\n```\n### 5. 测试地址\nhttps://服务器地址:9443/\n\n**暂时关闭SELinux**\n\n参考引用\n\n> [collabora office](https://www.orgleaf.com/2280.html)\n\n> [only office](https://www.orgleaf.com/2588.html)\n"]],[115,445],[3266,3266]]],[1532323989100,["lixq@lixq-PC",[[-1,115,"# office"]],[115,123],[115,115]]],[1532323993424,["lixq@lixq-PC",[[-1,24,"Lorem ipsum"],[1,35,"在线办公"]],[24,24],[28,28]]],[1532323995446,["lixq@lixq-PC",[[-1,26,"办公"]],[28,28],[26,26]]],[1532323999312,["lixq@lixq-PC",[[-1,27,"c"]],[28,28],[27,27]]],[1532323999485,["lixq@lixq-PC",[[-1,26,"\n"]],[27,27],[26,26]]],[1532324000718,["lixq@lixq-PC",[[1,26,"\n"]],[26,26],[27,27]]],[1532324002303,["lixq@lixq-PC",[[-1,26,"\n"]],[27,27],[26,26]]],[1532324002801,["lixq@lixq-PC",[[1,26,"\n"]],[26,26],[27,27]]],[1532324003487,["lixq@lixq-PC",[[1,27,"c"]],[27,27],[28,28]]],[1532324035833,["lixq@lixq-PC",[[1,26,"协同办公平台搭建"]],[26,26],[34,34]]],[1532324039647,["lixq@lixq-PC",[[-1,52,"consectetur"],[1,63,"软件"]],[52,52],[54,54]]],[1532324042388,["lixq@lixq-PC",[[-1,56," - malesuada"]],[59,68],[56,56]]],[1532324087383,["lixq@lixq-PC",[[-1,67,"semper"],[1,73,"collabora office"]],[67,73],[83,83]]],[1532324094048,["lixq@lixq-PC",[[1,88,"onlyo"],[1,89,"fic"],[-1,90,"rmentum"]],[88,97],[98,98]]],[1532324096121,["lixq@lixq-PC",[[1,56,"- "]],[56,56],[58,58]]],[1532324098362,["lixq@lixq-PC",[[-1,55," - "]],[58,58],[55,55]]],[1532324098829,["lixq@lixq-PC",[[-1,55,"\n"]],[55,55],[54,54]]]],null,"lixq@lixq-PC"]]}